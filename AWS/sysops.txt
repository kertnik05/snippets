1 Domain 1.0: Monitoring and Metrics
1.1 Demonstrate ability to monitor availability and performance
1.2 Demonstrate ability to monitor and manage billing and cost optimization processes

Service: CPU, Memory, Disk, and Network 
In AWS Monitor: EC2, ELB, ASG, RDS, SQS 

Cloudwatch and EC2 
- Basic Monitoring
    - 5 Minute intervals
    - Predeined Metrics
    - Status check of Metrics
- Detailed Monitoring
    - 1 Minute intervals
    - Same Metrics as basic monitoring 
    - Extra Costs
    - Available on a per instance basis 
- Additional Cloudwatch features
    - Custom Metrics
        - logged with Cloudwatch API 
        - Memory gathering script provided 
    - Logs
        - Text Matching Capabilities
    - Alarms 
        - Passive - sends notifications
        - Active - Performs actions
    - Dashboards
        - Graphs 
- Cloudewatch Alarm States Change 
    - Ok - under 70 CPU 
        - See Thershold in details
    - Alarm - Above 70 CPU            
    - Insuffiecient_data - EC2 is off 
-  Notifications
    - SNS Message 
    -  Auto Scaling Policy 
    - Frequency Dependent on notification type 

Cloudwatch Billing Alarm
    - Must Enable billing alerts
    - Data Stored in US-EAST-1 (N. Virginia) - Only available 
    - Accound-wide spend
    - Segmented by some AWS services

    - Steps
    - Preferences 
        - Receive Billing alerts 
        - Receive by email
        - Receive by Billing reports 
    - Create Alarm 
        - Enter total charges
        - SNS: enter your email 

SNS - Push mesaging services
- Topic Creation  
    - Create Topic Name 256 charactes
    - Display Name 10 charcacters 
- Topic Subscription 
    - Create Subrictions 
        - Protocol: Email, HTTP, Etc.
        - Endpoint: Emailaddress
        - Go to email and confirm substrciption 
- Topic Publication 
    - Publish a Message
        - Subject: your subject message 
        - Message: Your message 
        - Go back to emaila and see publication 
    - This will add to cloudwatch 

Create Alarm for Other services
- Shows when you have other services running 

Cloudwatch in Action 
- In EC2, see monitoring if Cloudwatch is Enable
    - Create a Alarm - https://www.lynda.com/Amazon-Web-Services-tutorials/Use-CloudWatch-alarm/569343/618786-4.html?srchtrk=index%3a8%0alinktypeid%3a2%0aq%3aaws%0apage%3a2%0as%3arelevance%0asa%3atrue%0aproducttypeid%3a2

Extend Cloudwatch 
    - Physical -> Hypervisor (cloudwatch can monitor) -> Virtual Machine (AWS CLI - software agent - needs permission from cloudwatch -> reports to cloudwatch)

Monitor EC2 Memory 
    - Check if IAM role is assigned in EC2 
    - Create a IAM role 
        - See if if attach policy has right to use cloudwatch 
    - Use CLI, Boto, or Language SDK - to associate IAM role with cloudwatch 
    - SSH to the Instance - to install the software agent that will report to cloudwatch 
    - set a cron entry (for time)

Cloudwatch Logs
- Immediate Application insight during failure
- Durable log archiving 
- Log-based alerts 
- Log-based actions 

Monitor Server Logs
- Create IAM policy and role for cloudwatch
- Associate IAM policy with EC2 Instance
- Install Cloudwatch logs agent on EC2
- Configure cloudwatch alerts 
    - Configure custom Metrics
    - Configure Cloudwatch alert 
        - Default 5 minute monitoring
    - Validate custom metric alert 

AWS Config 
- provides inventory to your AWS resources and a history configuration changes of these resources 
- implements compliance control 
- Records configuration changes
- Integrates with cloudtrail 
- Can record software changes with an agent 

    Config Rules - a feature of Config 
    - Describe desired state - example: Password Policy 
        - Billing Code tags example - checks the tag and not the value 
        - Change History: Cloudtrail, Configuration details, resource changes 
    - Periodic Check 
    - Event-driven check - Example: MFA is disabled 
    - AWS or Customer managed 
    - Dashboard 
    - Note: Config Rule check policy compliance - Changes occurs, periodic bais, and depends on configuration 
    - You dont select wheather a managed config rule executes on a schedule or on change basis 

    Config Basics
    - Simple Notification Service Notifications - is not required during setup 
    - S3 Bucket for configuration details
    - Not a free offering 
    - Record on per region

VPC Flow Logs 
- Created per VPC 
- capture all VPC network interfaces 
- Stored in cloudwatch 
-Require IAM role
- Configurle by traffic type - accept or denied

VPC Flow logs Contents
- IP Address
- Ports
- Protocol
- Elastic network interface
- Packet Information
- Traffic Action - accept or denied
- Logging status 

VPC Flow Log Limitations
- Peered VPC only on the same account 
- Immutable configuration 
- Primary IP Address in the destination IP
- AWS internal calls not permited 

Cloudtrail Logs
- Cover most AWS services 
- Reside in S3 
- Integrate with cloudwatch 

Key Elasticsearch Features 
- Fully Managed service 
- Powerful analytics engine - analyze text and index text files 
- Dashboard integration - Kibana 
- Lambda can push Cloudwatch to Elastic search 
    - can use kinesis firehose for data transformation 

    Considerations 
    - Cannot restric user or rules 
    - Feature set - Data dog, sumo logic 
    - Goals

AWS X-Ray (Application Performance Management )
- Analyze the behavior of applications by providing request tracing, exception collection and profiling capablities 
- Helps why problem exist 
- Native Integraion with AWS
- SDK integration required for applications 
- X-Ray API for almost any development language 
- X-Ray agent for EC2 or on premises 

X-Ray Concepts
- Trace -records transaction
- Segment - data 
- Subsegment - Data of data
- Annotation - Drills into traces. Adds Business context 
- Error 
- Sampling Rate - higher data more overhead
- 
Why service-oriented architechture?
- Isolate Components
- Improve Cycle Time 
- Fluid Scaling 

Cloudwatch Events 
- Event 
    - Can caputre Infastracture events 
    - React to Time - scheduled
    - Custom
    - All valid EC2 states except rebooting, can be use for triggering a cloudwatch rule 
- Target 
    - Can reboot or stop EC2 
- Rule - defines which target gets invoke 

Lambda 
- Let you run serverless app 
- Can be launch within VPC - can access resources with VPC 

Combines Cloudwatch and Lambda 
- Cloudwatch events and lambda combine to automate your monitoring needs and corrective actions 


2 Domain 2.0: High Availability
2.1 Implement scalability and elasticity based on scenario
2.2 Ensure level of fault tolerance based on business needs
Fault Tolerance - The defining quality of a system that can continue to operate when a component failure occurs
High Availability - High availability is all about how long a given system stays up over a specified period of time. This is about the number of 9. 

Designing for Failure 
    - World 
        - Region 
            - Two or more AZ 
            - Edge Locations 
        - Tools HA 
            - Route 53 (DNS) - distribute traffic across regions 
                - Availability - Can perform health checks in Enpoints (Ip or URL)
                - Functional - String Matching first 5, 120 Bytes, No Pattern Matching, Global 
                - Can create Alarms and send to SNS 
                - Active/Passive Fail over 
                - 3 Options for Multi Region Design 
                    - Rout 53 Active Routing Options 
                        - Weighted Round Robin - AWS routes traffic based on the weight assigned to a record set, divided by the sum of all weights for all record sets
                            - In case of Failure, traffic will be pointed where most weight, and use ASG to increase the number of EC2 
                            - With a 5 3 route policy and two regions, what is the correct traffic distribution between regions? 3/8 and 5/8 
                        - Latency Based - DNS will compare latency 
                            - In failure, DNS will point route the traffic to a healthy region. ASG can be use to accomdate the traffic. 
                        - Geolocation based - GEO DNS 
            - ELB - distribute traffic inside one region  and accros AZ 
                - Can split inbound traffic to EC2 servers 
                - Route 53 to Check ELB health checks 
                - Internal/External ELB
                - SSL Decryption 
                - Simple Integration with AWS Certificate Manager 
                - Integrates with IAM for granular control 
                - Can do Health Checks on EC2 instances 
                - Sticky sessions - handled by load balancers generated cookies 
                - Classic Load Balancers 
                    - Supports layer 4 and layer 7 load balancing
                        - layer 4 (transport)
                            - TCP
                        - layer 7 (application) 
                            - X-forwared-for, -Proto, and -port 
                            - sticky session (cookie based)
                - Application Load Balancer 
                    - HTTP/2 - allows multiple request to be sent in a single connection
                    - Content-based routing - target group (EC2)
                        - Target Group - consist EC2, can include AZ and in one VPC 
                            - Create Target Group VPC 
                            - Add Instances to Group 
                        - Create ALB to associate target group with it 

                    - Improve Metrics - on ports 
                    - Support web sockets
                    - Support container  

            - Elastic IP - Can be re-assign from one instance to another 
                - Public static IP 
                    - if release, it will return to AWS pool and cannot get it back (similar to a regular public ip) 
                    - If an EC2 instance has a public IP address assigned by DHCP, that IP is release  while the instance is stopped
                - Can re-associate to another EC2 in case of failure 
                - EC2 must be in a subnet that is publicly accessible 
                - Hourly fee when not associated with a running EC2 instance
                - Scope limited to an individual AWS region 
                    - can move accos VPC within a region 
                - For Example, a legacy application server that cannot use Application Load balance. T
                    he Cloudwatch can post to sns and invoke a lambda function. Lambda can disaasociate the EIP from a failed instance to the working instance. 
            - ASG - to react to increase in request load - load triggers to increase the number of instance 
                - 3 Fundamental Components 
                    - launch configurations (Define what EC2)
                        - similar to starting EC2 
                        - AMI template
                        - EC2 Instance Type 
                        - User Data
                        - Security Group 
                    - ASG groups (Define the number of machine, VPC and locations) 
                        - Launch Configuration to tell what instance to start 
                        - Number of instances
                        - VPC 
                        - Subnets(s)
                        - ASG behind Load balancer 
                    - Scaling Policy (how to react) 
                        - Increase/Decrease EC2 instance in ASG 
                        - Respond to cloudwatch alarms 
                        - Can be schedule driven 
                    - ASG Design Considerations
                        - subnets and availibility groups (how to distribute EC2) 
                        - scaling policies ( to launch number of instances by threshold)
                        - Number of server ( minimum number of servers )
                        - Boot Time (how quickly is the boot)
                - Use ASG with ALB 
        - Decoupling tools 
            - API Gateway 
            - Lambda 
            - SQS 


                    

Understanding Fault tolerant Components
    - Storage Options
        - S3 - Object Storage, accessible from anywhere 
            - Global namespace - must be unique 
            - 5TB maximum object size 
            - Web accesible 
            - Lifecyle Management 
            - Simple storage service availability 
                - availibility - standard 99.99%, reduced redundancy 99.99%, Infrequent Access 99.99%
                - durability - standard 100%, reduced redundancy 99.99%, Infrequent Access 100%,
                - Storage pricing - standard $$$, reduced redundancy $$, Infrequent Access $
                - Request Pricing - standard $, reduced redundancy $, Infrequent Access $$
            - CRR - S3 Cross region Replication
                - Turn on Versioning 
                - Turn on CRR 
                    - When there's a objects inside prior turn on CRR, has to be sync manually

        - EBS - Block storage, Hard drive to EC2 
            - Attached storage behavior 
            - can be encrypted 
            - 99.999% availability
            - attached to a single EC2 instance
            - Scope to a single AZ on a given region 
            - Snapshot capability 
                - stored in s3 
                - encrypted EBS, if Snapshot is create it also create an encrypted snapshot 
            - Volume enryption applies 
            - Snapshots are transportable 
            - Lazy load to volumes 
            - How to minimize service disruptions 
                - Create a recurring snapshot 
                    - If EBS fails, grab the latest EBS snapshot 
                - When EBS volume fails, you will lose some data since the last snapshot was taken 
        - EFS - File storage, Mulitple EC2 can point to one EFS 
            - Fully Manage file service 
            - Network attach storage behavior
            - can me mounted to multiple servers 
            - NFS protocol - not in windows 
            - Scoped to an AWS regions 
            - Elastic Usage
            - Distributed by design 
            - Create a mount target in each availability zone 
                - In case of failure, the app server can point to another EFS mount target 
                - You can move the app server to another AZ with the working EFS mount target 
            -  best way to configure a new instance to mount an EFS volume - dynamically identify the endpoint in the target AZ and mount it in user data 
    - Database Options
        - DynamoDB(NoSql)- high availability 
            - Fully managed by AWS 
            - Can be installed locally for development purposes
            - confined to a single aws region
            - Data replicated across three independent locations 
            - Designed to tolerate infastracture failure 
                - You can replicate multiple DyanmoDB tables to different regions using a multiple  Streams job.
            - Elastic Storage 
            - Elastic throughput
            - Continued Availability 
        - RDS 
            - Create a standby database 
            - Can create Cross region read replica, but only for database that support read replica 
            - Create a multi AZ options failover 
                - Create RDS VPC with multi AZ
                    - create a subnet group on each AZ
                - Create RDS 
                    - specify Security Group 
                    - Create automatic backups 

            - Use DNS name and not IP for database 
            - Read Replica Considerations
                - 5 for MySQL and PostgreSQL
                - 15 for Aurora 
                - Asynchronouse replication
                - Read only sql queries 
                - Need fresh data 
                - create read replica to another region 
            - RDS Limitations
                - Operationally dependent on AWS 
                - Inability to micropatch
                - Inability to use some database features
                - restricted privileges 
            - DB parameter group and or option group - to change database engine specific items 
        - Elasticache - In Memory Caching, can be ran in a single node or multi availability zone cluster 
            - Redis Compatibility - Read and write capability 
                - Use Append-only file (AOD) for data durability
                - Use Replication groups to protect against cluster failure 
                - Replication group failure is handled automatically 
                - Multi AZ 
                    - No Manula cluster promotion 
                    - No OAF 
                - Create Cache subnet group on all AZ 
                    - configure primary node
                    - If primary node fails, it point to read replica with least amount replication lags and depends on DNS 
                    - Elastic cache - replaces the failed replica 
            - Memcahed Compatibility - read only 
                - Multi AZ 
                    - Create cache subnet group on each AZ 
            - Completely Manage by AWS 
            - Elastic 
            - Multi AZ capability 
            - closely aligned with r3, because of memory optimization 
        - Sidenote: Autodiscovery: Client can access all nodes in the cluster with reconfiguration 

    - AMI - where virtual machine image is launch 
        - Modifiying Instances on startup 
            - Pass parameters to the AMI on launch using the user data field 
            - shell script, cloud init package, or powershell script 
            - Apply software patches and dowload latest software
            - Run as the root user
            - Only run on initial boot of the instance
        - AWS EC2 run instances (command)
            - --image-id 
            - --count
            - --instance-type
            - --key-name 
            - --subnet-id 
            - --security-group-id
            - --user-data (use for boot command) 
            - --profile 
        - Modify instances on initial boot 
            - $ time sudo yum update -y 
        - Things to consider 
            - how are you goint to use AMIs?
            - how frequently are you going to update your AMIs?
            - How are you managing user data?
            - how are you going to use AMIs in convert with automation tools?
            - What are the implications of on boot and on reboot?
            - How important is boot time?
        


    - ASG - a way to scale up/down or in/out
    - Lambda - can scale automatically, mirco services approach, event driven to run code 
    - API Gateway - facilitates management of API performance, regardless of the scale required.  Integrates with Lambda 
    - Cloudwatch - monitors AWS metrics, can create custom metrics 
        - cloudwatch cannot monitor EC2 memory 
    - Simple Queue Service - Polling base queing; Queue can be offline and the messge will simply queu up 
    - SNS - Push based messaging system 
    - Elastic IP address - can be reaasigned to another EC2 





3 Domain 3.0: Analysis
3.1 Optimize the environment to ensure maximum performance
3.2 Identify performance bottlenecks and implement remedies
3.3 Identify potential issues on a given application deployment

Cloudwatch EC2 Metrics 
- CPU 
- Network
- Disk
- Status 

Cloudwatch: Storing Metrics
- Default storing is 2 weeks for an instance 
- If you need the metrics that are stored more than two weeks, then you can use third party tools or the GetMetricsStatistics API 
- Terminated EC2 or Elastic Load Balancing (ELB) instances: 2 weeks 
- Default Monitoring Sample time = 5 minutes 
- Detailed Monitoring Sample time = 1 minute 

EBS Overview
- Elastic block store
- Network block storage as a service 
- EBS volumes can attach to any EC2 instances in the same availability zones 
- Designed for five 9s of availability 
- Over 2 million volumes created daily 

EBS overview 
- EBS volume types - can only be attached to 1 instance at a time 
    - magnetic 
        - Magnetic HDD 
            - Good for infrequent data access 
            - Best effors: 40-90 MB/s 
            - Latency: 10-40 ms for reads and 2-10 ms for writes 
    - General Purpose SSD
        - SSDs
        - Good for most workloads 
        - Best efforts: 100-10,000 IOPS
        - Throughput: 160 MB/s 
        Latency average: 5 ms 
    - Provisioned IOPS SSD 
        - SSDs
        - Good for Mission critical 
        - IOPs: 100-20,000 
        - Burst Bucket: up to 3,0000 IOPS (30 minutes)
        - Throughput : 320 MBs 
        - Latency Average: 5ms 

EBS Performace Factors 
    - Common performance Factors
        - IOPs - Read/write 
        - Latency - Time of request 
        - Throughput - How much information send/receive 
    - References: grnad and indirect 
    - Buffer size
    - I/O size (broken up): 128 K 
    - Cache size 
    - Queue size: pending size 
    - Cloudwatch Metrics
        - Basic - 5 minute interval 
        - Detailed - provisioned iops 1 minute interval 
            - Per request is added to detailed 
    - see EBSperformanceFactor.png 
    - Best Practice
        - Consider: Parallelism - threads 
        - Use -  EBS optimized 
            - EBS - Optimized instances remove confusion (Qos)
            - network traffic and EBS traffic are shared 
            - optimized configuration stac that provides additional and dedicated capacity between EC2 EC2 and EBS/IO 
            - 500 Mbps and 1,000 Mbps dedicated bandwidth 
            - performance sensitive production databases (PIOPS)

        - Use - the correct instance type 
        - Use - the proper file systemss or stuctures 

Monitoring s3 buckets 
- Automated Monitoring tools
    - Cloudwatch alarms 
    - Cloudwatch trails 
- Manual Monitoring 
    - S3 Dashboard 
    - Cloudwatch Homepage 
        - S3 Storage Metrics 
        - S3 Request Metrics 
    - AWS Trusted Advisor
- Monitoring 
    - Must be opt in to receiving them
    - Metrics are billed at a standard rate 
    - It takes 15 munutes for cloudwatch to begin tracking request metrics 
    and then populate graphs 
    - Know that 1 minute cloudwatch metrics are available when enabled, which will help you identify bottlenecks quickly 

RDS Monitoring 
    - Relational Database service 
    - Cloud scale
    - Industry standard databaseEasy to use and set up
    - cost efficient 
    - Monitoring
        - Monitor in RDS for the following metrics:
            - CPU 
            - Memory 
            - Storage 
            - Read and write IOPS 
        - Swap usage 
        - If you need more granularity, use cloudwatch to monitor RDS 
            - http://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/rds-metricscollected.html
        - Notification
            - SNS event - Push Method 
    - To view usage and performance statistics for a database instance with command line interface 
        - mon-get--stats 

Route 53 Monitoring 
    - standard DNS service 
    - Monitor Health and PErformance of specific application 
    - Redirect services 
    - Monitor with cloudwatch 
    - Route 53 Health Checks 
        - Endpoints 
        - Cloudwatch Alarms 
        - Other health checks - calculated health check 
        - know Optional Health check features:
            - https
            - String Matching
            - Fast interval 
            - Latency Measurements 
    - Route 53 status: Healthy or unhealty 
        - Monitor up to 50 endpoints for freee 
    - Elasticache 
        - What is elasticache 
            - In memory data store 
            - Improves performance o0f web apps 
            - Supports two memory engines 
        - Four metrics to know 
            - CPU utilization 
                - Memcahced 
                    - multithreaded open source solution
                    - can handle loads up to 90% before nodes are added to cluster 
                    - scale up 
                - Redis 
                    - single threaded
                    - Scaling  -  need to take 90% and divide by the number of cores 
                    - scale out 
            - Evictions 
                - Old data removed so new data can be placed in cache 
            - Swap usage (page File)
                - memcached 
                    - should not exceed 50 MB 
                    - Increase memcahced_connection_overhead
                - redis 
                    - no swapusage metric 
                    - use reserved memory 
            - concurrent cconnections
                - Traffic spikes 
                - No recommended setting 
                - set up alarm to monitor concurrent connections 
        - Scaling:
            - Memcached 
                - Scale up or scale out 
            - Redis - scale up 

Monitoring best practice 
    - use 
        - cloudwatch custom events 
        - metrics and alarms 
    - schedule 
        - schedule maintenance with cloudwatch and lamnda 
    - send
        - send logs from AWS resources with log triggers and lamnda functions 
    - Plan
        - pland and document
    - Prioritize
        - prioritize monitoring in your environment 
    - Automate 
        - Automate monitoring tasks and remove manual tasks 

Monitoring Elastic Beanstalk Monitoring
    - PaaS for web apps 
    - AWS extracts the complexity of deployments 
    - PHP, Ruby on Rails, Python, JAVA, .Net, Go, Node.js, Docker, Apache, NGINX, and More 
    - No Charge - Just pay for other resources used 
    - Benefits
        - fast simple to start 
        - Enhances developer activity
        - Impossible to outgrow
        - Complete resource control 
    - Handles the following:
        - Elastic Load Balancing
        - Provisioning
        - Auto scaling
        - Monitoring 
        - Period: 1 Minute to 1 day 
        - Time range: 1 hour to 2 weeks 
    - Enhanced Health Reporting 
        - granularity
        - Visibility
        - Flexibility 
    - Logging 
        - 100 lines of logs of the netire set of logs form each EC2 
    - EBS performace factors 
        - 1 min to 1 day period
        - 1 hr to 2 weeks time range 
    - Is manange Platform as a service 
    - Know that enchanced health adds a status descriptor 
    - Manage update is per application basis 
-------------------------------------------------------
2: Optimizing the Environment 
Optimizing EC2 Intances 
    - Instance Type
        - Spot 
            - short term needs
            - reserved instances for long term needs 
            - stop instances not in use 
            - montior daily costs 
            - pareto principle - 80% attribute to 20% of AWS resources 
        - On Demand 
        - Reserved 
    - 3 payment options:
        - all upfront 
        - no upfront
        - partial upfront 
    - Best practices 
        - EC2 right Sizing solution 
        - Trusted Adisor checks 
        - Cost Explorer 
        - Audits 
        - third party tools 
    - Test tip:
        - Cost Ecplorer billing tool 

Optimizing Beanstalk
    - adjustable configuration for performance 
        - monitor in Cloudwatch 
        - Auto Scaling 
        - Elastic Load balancing 
    - Time based scaling 
        - sclae based on schedules for Auto scaling group 
    - Test Tip: 
        - Scale out with number of nodes: horizontal 
        - Scale up with Amazon Machine Images (AMI): Vertical 
    - Configuring alarms on Elastic Beanstalk

Optimizing Resources: Auto scaling 
- Functions of Auto scaling 
    - monitor health of instances 
    - automatically replace failed instances
    - balance capacity accross amazon 
- dynamically addjust EC2 instances 
- Application autoscalling to other resources beyond EC2 
- Monitor Auto scaling groups
- Metrics are gourps and apps 
- Test tip: send montioring data to S3 to use in in house tool 

Trusted Advisor 
- Online resource
- Realtime guidance
- Optimize your AWS environment
- Benefits  
    - Core checks 
        - six core trusted advisor checks 
        - security (limited)
        - performance service limits 
    - full trusted advisor 
        - Access to full trusted advisor benefits 
        - cost optimization
        - notifications
        - APIs 

Elastic Load Balancer 
- automatically distributes workload 
- load balances network traffic to EC2 
- enable fault tolerance 
- 2 types: 
    - classic load balancers 
         - network level information
         - simple workloads 
    - Application load balancer 
         - routes based on application information for advance routing 
         - routes traffics accross multiple ports on the same EC2 instance 
- Notifies on scaling events 
- measures and send metrics in 60 second intervals
- Metrics should be reviewed before exam 

Consolidated Billing 
- One bill per account
- Volume discounts applied
- easy tracking 

Consolidated Billing: best practics 
- Use a payer account for paying invoices
- never use resources for a payer account
- use multifactor authentication (MFA)
- Use hard to guess passwords 
- setup billing alerts 
- Enable cloudtrail 
    - per region
    - per account basis 
- The EC2 right sizing solution does not work with organizations 
- By Default, 20 linked accounts permitted 

AWS Billing and Alarms 
- Billing often overlooked
- AWS budgets - create a custom alert when AWS cost exceeds threshold 
    - Keep costs in check and send alerts 
    - costs exceeded 
    - forecast cost overages
    - set threshold 
    - two free budgets (cost for additional) 
    - up to 20,000 budgets can be set, and 2 is free per organization 
- Cost Explorer - free tool to see chart of your cost and usage 
    - Eliminates cost and usage
    - Generate reports 
        - Access from  billing manangement and management console
    - detects anomalies 
    - Run report 
        - Cost and usage report 
        - Reserved Instance utilization report 
        - Reserved Instance coverage report 
- Billing alerts and cloudwatch alarms 
    - Alerts = AWS billing console
    - Alarms = Cloudwatch 
    - alert must be enabled by root account owner 
    - Billng Alerts 
        - Preferences
            - PDF
            - Billing alarm/alerts 
            - Billing reports 
                - saves to s3 in csv and zip format 
- Billing Preferences - Preferences how you receive alerts and reports 
- Test tip: Create Billing alerts before creating billing alarms 

Event Driven Monitoring 
- Lambda - serveless compute solution to create triggers 
- SNS - facilitate messaging 
- cludewatch and lamda combined
- use for triggers for events 
Test Tip: 
Cloudwatch events 
    - configure aws events as targets 
    - near real time stream 

Dashboard Alerts 
- used for visualization and easy access to status of resources 
- Options include
    - open issues
    - scheduled changes
    - other notifications
    - view all alerts 
- AWS Service Health Dashboard 
    - monitors AWS service health
    - Provides upt to the minute information on AWS services
    - Views specific regions
    - Allow Customized dashboard views 
- Test Tip: Open issues will show orange alert 

AWS Cloudwatch 
- Monitoring service for AWS resources and the applications you run on AWS 
    - collect and trac metrics 
    - Collect and monitor log files 
    - set alarms
    - automatically react to changes in your AWS resources 
    - Free tier and paid tiers 
    - Monitor most AWS resources 
        - EC2
        - S3
        - DynamoDB 
        - EBS 
        - RDSElastic MapReduce Job flows
        - AWS Elastic Load Balancing 
        - Other Resources in AWS 
    - Cloudwatch workflow 
        - Cloudwatch Alarm
            - throttledEvents > 2 over 5 minutes 
        - SNS Notification  
            - Publish to DynamoDB Topic 
        - Lambda
            - Call API
            - DynamoDB.UpdateTable 
    - test Tip: High Resolution Alarms are only available with the paid tier 

Custom Metrics 
    - Not all metrics included in standard or detiled metrics
    - custom metrics used for RAM monitoring for example 
    - RAM sampling is 1 minute
    - AWS custom scripts available 
Test Tip: In Elastic Beanstalk you can use a .ebextensions configuration file 

Cloudwatch custom dashboard 
- Customize your dashboard for easy access to your resource visibility 
    - to get the view you require for your resources 
    - used for monitoring groups of machines 
    - Metric Widget types
        - line
        - stacked area
        - number
        - text 
- Can monitor your resourcess across multiple regions and availability zones 
ExampTip: Cloudwatch Dashboards can be used to monitor resources that are spread accross different regions 

Centralized Monitoring 
- Cloudwatch is a very powerful tool to monitor your environment
- However, your monitoring requirements may call for using a third party toolset to enable centralized management and monitoring 
- How to Allow Access to monitor EC2 
    - Ports for SQL and ICMP
    - How to use security groups 
    - ACLs are used for both buckets and objects
    - ACL policy (XML)
    - Bucket policy (JSON) 
- Cloudwatch is not granular 
- Does Not Monitor HA NAT instace capability
- Use centralized services like splunk or datadog 
- Consider using security groups or ACLs
- Open ports (ICMP)
- IP address or IP address range 
Test Tip: SQL 1433, Mysql 3306 

Using SNS notifications 
- is a pub/sub fully manage messageing service and mobile notification service 
- SNS will send monitoring to cloudwatch every 5 minutes
- AWS allows you to turn on detailed monitoring where metrics will be sent every minute 
- SNS has n detailed monitoring capability - 5 minutes only 
- There is a Time to live message attribute on SNS topics 

SNS Notifications
    - Publishers are people or applications using AWS services like cloudwatch and S3 to send notifications to an sns topic 
    - TOpic is a list of subscribers who receive the notifications 
        - Topics have an ARN (Unique) 
    - Subscribers are endpoints, email, http, and SMS that receive notifications 

SNS Messages 
    - SNS is a push service
    - Cloudwatch sends alerts with SNS 
    - Create a topic to publish to SNS 
Test Tip: Topic = 256 characters and display name = 10 characters 

Application Monitoring 
    - Cloudwatch does not monitor applications per se 
        - Does monitor resources for applications
        - Does react to resource issues with events
        - Does not provide application discovery 
        - Does not provide complete visibility of your applicatons
        - Does not track application transactions
        - Does not provide exetended analytics 
    - Third Party application may be needed if you need to extend past the capability of cloudwatch 
    - Health of appication resources can be monitored, but don't get confused over discovery, transactions , etc. 
    Test Tip: Use cloudwatch events to react to application resource issues 

Resource groups
    - a resource group is a collection of resources that share one or more tags 
    - Tags are word or phrases that act as metadata for organization your AWS resources 
    - Create a Tag before resource groups 
    - Create tags to attach to resource groups 
    - Tag - key = value 
    - Tag Editor to centralize tags  - to manage your tags
    - feature to manage tags accress serices and regions
    - search globally
    - manage globally
    - edit tags in bulk 
    - free to use
    - create tags and attach to resource groups
    - Tags function like properties of a resource 
    - are shared accress an entire account 
    - share URL with users to their identity 
    - Test Tip: What is the process for creating a resource group? create tags before your create a resource group 

AWS Cloudfront EDGE Caching 
- is a global content delivery network (CDN) service that securely delivers data, videos, applications, and APIs to your viewers with low-latency and high-transfer speeds 
- It is a global edge network 
- Global content cache 
- 82 edge locations 
- 11 regional edge caches 
- 23 countries 
- 49 cities 
- Performance Benefits 
    - can reduce cost for content delivery 
    - Increases performance by utilizeing edge locations
    - Speeds up content by using cache headers
    - No charge for content to cloudfront 
- Test Tip: How does S3 differ from cloudfront? Edge cahing in cloudfront (No edge cache in S3) 

Cloudwatch logging 
- Cloudwatch is a very powerful tool to monitor your environment
- It can also be used for logging with cloudtrail for compliance reasons 
- Logging Features 
    - Free and paid resouces used like S3 
    - monitor logs from Amazon EC2 instances in real time
    - Monitor AWS cloudtrail logged events 
    - Archived log data 
- uses subscription for real time logging
- create a subscription filter (metrics)
- send to lambda or kinesis 
- Test Tip: 
    - Not that cloudwatch log groups can be created two ways:
        - cloudwatch console 
        - EC2 instance agent install 







4 Domain 4.0: Deployment and Provisioning
4.1 Demonstrate the ability to build the environment to conform with the architected design
4.2 Demonstrate the ability to provision cloud resources and manage implementation automation

5 Domain 5.0: Data Management
5.1 Demonstrate ability to create backups for different services
5.2 Demonstrate ability to enforce compliance requirements
5.3 Manage backup and disaster recovery processes 

Introducing Amazon Web Services 
- In market the longest
- usually the cheapest
- most often used in production workloads
- very frequent product releases and updates 

AWS Service Categories 
- Compute
    - Virtual machines/containers/lambdas
- Storage
    - Files/databases 
- Other Services 

Why AWS Data services?
- Data services options often drive vendor selection
- Data today is partition between data services 
- The partner ecosystem matters (real-wrold highlights)

Exploring file and HDFS storage 
- Files: warm/cold 
- Other: LAN replacement, HDFS 
- The Vs
    - Volume 
    - Volocity
    - Variety
    - Verocity 
- Questions
    - Small/medium 
    - Large/huge 
    - Complex 

- AWS Data service choices 
    - RDBMS - small
    - NoSql - large
    - Hadoop ecosystem - large or huge 
    - NewSQL - complex 

What you pay for in Data services
    - storage capacity/locations/redundancy
    - Access: write speed, read speed, and query complexity 
    - Other: encryption, logging, etc. 

Cloud Tools Matter 
    AWS Tools
        - Console/website
        - scripts
        - SDK 

    Vendor tools 
        - AWS Tools
        - Product tools
        - MySQL workbench 

Exploring the core file storage choices
- Warm storage  - frequent read/write 
    - S3 
- Cold storage 
    - glacier 
- EC2 storage 
    - Single - EBS (Elastic Block storage)
    - Multiple - EFS ( Elastic File storage) 

Exploring Simple storage service S3 
    - file storage using buckets and folders
    - commody priced 
    - All purpose storage 

- S3 Lifecyle
    - create
    - Add 
    - Manage 
- S3 
    - Bucket Properties 
    - what region
    - assign groups 
    - add bucket policy 
        - aws policy generator 
        - Statements
            - Effect: allow or deny 
            - Principal
            - which AWS service: s3 
            - Actions CRUD related to s3 
        - ARN 
    - Static website hosting 
        - enable website hosting 
    - Logging 
        - enabled 
    - Events to receive SNS or sqs que 
    - Versioning 
        - enable versioniong: Lifecycle rule. Once, enabled cannot be disabled. Disabled by default 
    - Cross region replication 
        - Must enable versioning 
    - Tags 
    - Requester pay for data transfer 
- S3 Lifecylce Rules
    - Step 1: Choose Rule Target 
        - whole bucket or folders 
    - Configure rule: 
        - archive only 
            - 30days of the creation date 
                - Rule name
        - pemanently delete only
        - archive then permenanetly delete 
    - Activate the rule 


Create a folder or not? Mostly create folder 
    - Folder properties 
    - Similiar to bucket 
        - standard - replicated accross different locations 
        - reduced redundancy - one location 
        - server side encryption: none or AES-256 

Exploring Glacier storage 
    - File archiving using vaults and archives
    - Commodity priced - 1cent per gig 
    - Cold file storage 
    - Creating a Vault 
        - Region
        - Event notifications
            - need to create topic so you can subscribe to 
        
Cloudberry 
- storage mananagement tool
- very easy to use
- sophisticaed syncchonization and backup 
- Create backup 
    - Enter Bucket
    - Access Key 
    - Bucket key 

Exploring Elastic Block Store 
- Used to back individual EC2 (virtual machine) instances 
- Provides additional capablities, eg snapshots 

Exploring Elastic File Store (SAN or LAN replacement)
- Used to back multiple EC2 (virtual machine) instances in the sample VPC 
- Create EFS
- Create EC2 mountpoint prior attaching EFS 

Raw storage summary 
- S3 
    - warm file storage 
    - understad properties 
- Glacier 
    - archival file storage
    - cost most to retrieve
- EBS or EFS 
    - use with EC2 instances
    - w/EC2
- Other SSD
    - used with databases 
    - understand cost 

Simple monthly caldulator (calculatro.s3.amazonaws.com ) 

Other AWS file services 
- storage gateway: integrage on premise storage 
    - Provision a host 
    - Download and Deploy the VM
    - Provision local disk storage 
    - activate your gateway 
- cloudfront: stream files where your customers live 
    - create distribution to edge locations 
        - web distributions - S3 or web server 
        - RTMP - streaming media 
RDBMS 
- AWS Data service choices 
    - RDS - RDBMS - small/medium 3TB max 
        - partially manage relational database service 
        - use when you are light on DBA resources 
        - can schedule routine tasks, eg backup 
        - can use SSD and set provisioned IOPS volumes 
        - Inlcudes popular RDBMS 
            - Open Source 
                - MySQL (SMALL)
                    - Creating RDS 
                        - Default: MultiAZ and Provisioned IOPS storage 
                        - storage types:
                            - SSD - higher the storage size more latency 
                        - Port 3306 
                    - MySQL workbench 
                - PostgreSQL (MEDIUM)
                    - 9.4 recommended 9.1 to 9.4.4 
            - Commerical
                - Microsoft SQLserver (MEDIUM)
                    - SQL Server management studio or profiler 
                    - License required 
                    - Port 1433 
                - Oracle 
                    - supports  oracle 11 or 12 
        - 5 max replica 
        - snapshot are created upon database creation 
    - NoSql - large
    - Aurora - Hadoop ecosystem - large or huge (LARGE)
        -  Massive MySQL 
            - Upto 64TB 
            - well priced 
            - built in scalability 
        - 15 max replica 
        - mysql 5.6 
    - NewSQL - complex 

Logging Data to SQL Server RDS 
- Cloudtrail 
    - creates logs file on services and api calls 
    - store logs in s3 

NoSql - small, medium, complex 150 different kinds 
    - key/value  - large dictionary hashed table, fast cache system 
    - Column - commonly used for irregular data - one to many attributes (optional fields) 
    - Document - new xml, semi structured json 
    - Graph - Noun Verb Database, persist the verbs  

    - Understanding Elastic Cache 
        - Memcached or redis 
        - Cheapest and fastes cache 
        - In-memory only
        - key value store 
        - Monitored by cloudwatch 
    - DynamoDB 
        - Key-value store 
        - Document database 
        - Use SSD drives
        - create tables with keys, values, and indexes 
        - set to Read/write throughpug
        - used for huge, scalable lookups 
        - Create Primary key -> set provision throughput -> create your table with alarms 
        - produce streams that can record incoming data 
            - Kinesis - https://www.lynda.com/Amazon-Web-Services-tutorials/Understanding-Kinesis/383048/435263-4.html?srchtrk=index%3a1%0alinktypeid%3a2%0aq%3aAmazon+web+services%0apage%3a1%0as%3arelevance%0asa%3atrue%0aproducttypeid%3a2
                - real time big data streams
                - create one or more streams
                - write data to stream
                - read data from stream windows 
                - event data streams
    - Other NoSQL Databases 
        - Can create an EC2 virtual machine or an AMI 
        - Offered by AWS Marketplace - https://aws.amazon.com/marketplace
        - offered by third party vendors mongolab and redis labs 


NewSQL - small, medium, complex 




6 Domain 6.0: Security
6.1 Implement and manage security policies
6.2 Ensure data integrity and access controls when using the AWS platform
6.3 Demonstrate understanding of the shared responsibility model
6.4 Demonstrate ability to prepare for security assessment use of AWS
7 Domain 7.0: Networking
7.1 Demonstrate ability to implement networking features of AWS
7.2 Demonstrate ability to implement connectivity features of AWS